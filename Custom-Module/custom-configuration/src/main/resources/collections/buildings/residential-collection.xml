<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<configuration xmlns="https://cm5.intertrust.ru/config">
    <collection name="residential_collection" idField="id">
    <prototype>
        <![CDATA[
                select
                  br.id    as id,
                  br.area  as area,
                  br.type  as build_type
                from build_resident br
                  left join build_type bt ON bt.id = br.type
                where
                  1=1 ::where-clause
            ]]>
    </prototype>
    </collection>

    <collection-view name="residential_view" collection="residential_collection" is-default="true">
        <display>
            <column field="area" name="Площадь" type="long" min-width="50px" text-break-style="cut" editable="true"/>
            <column field="build_type" name="Тип строения" type="string" min-width="50px" text-break-style="cut" editable="true"/>
        </display>
    </collection-view>

    <collection name="residential_status_collection" idField="id">
        <prototype>
            <![CDATA[
                SELECT
                    id,
                    name status_name,
                    description status_description
                FROM status
                WHERE
                name IN ('Actual', 'Cancelled') ::where-clause
            ]]>
        </prototype>

        <filter name="byStatusName">
            <criteria placeholder="where-clause">
                <![CDATA[
                    LOWER(name) LIKE LOWER('%' || {0} || '%')
                ]]>
            </criteria>
        </filter>

        <filter name="byStatusDescription">
            <criteria placeholder="where-clause">
                <![CDATA[
                    LOWER(description) LIKE LOWER('%' || {0} || '%')
                ]]>
            </criteria>
        </filter>
    </collection>
</configuration>